# Docker 命令大全

## 1.容器生命周期管理

### 1.1 Docker run 命令
```
docker run ：创建一个新的容器并运行一个命令

docker run [OPTIONS] IMAGE [COMMAND] [ARG...]

使用docker镜像nginx:latest以后台模式启动一个容器,并将容器命名为mynginx。
docker run --name mynginx -d nginx:latest

使用镜像nginx:latest以后台模式启动一个容器,并将容器的80端口映射到主机随机端口。
docker run -P -d nginx:latest

使用镜像 nginx:latest，以后台模式启动一个容器,将容器的 80 端口映射到主机的 80 端口,主机的目录 /data 映射到容器的 /data。
docker run -p 80:80 -v /data:/data -d nginx:latest

绑定容器的 8080 端口，并将其映射到本地主机 127.0.0.1 的 80 端口上。
$ docker run -p 127.0.0.1:80:8080/tcp ubuntu bash

使用镜像nginx:latest以交互模式启动一个容器,在容器内执行/bin/bash命令。
runoob@runoob:~$ docker run -it nginx:latest /bin/bash
root@b8573233d675:/# 
```

### 1.2 Docker start/stop/restart 命令
```
docker start :启动一个或多个已经被停止的容器
docker stop :停止一个运行中的容器
docker restart :重启容器

docker start [OPTIONS] CONTAINER [CONTAINER...]
docker stop [OPTIONS] CONTAINER [CONTAINER...]
docker restart [OPTIONS] CONTAINER [CONTAINER...]

启动已被停止的容器myrunoob
docker start myrunoob

停止运行中的容器myrunoob
docker stop myrunoob

重启容器myrunoob
docker restart myrunoob
```
### 1.3 Docker kill 命令

```
docker kill :杀掉一个运行中的容器。

docker kill [OPTIONS] CONTAINER [CONTAINER...]
OPTIONS说明：
  -s :向容器发送一个信号

杀掉运行中的容器 mynginx
runoob@runoob:~$ docker kill -s KILL mynginx
```
### 1.4 Docker rm 命令
```
docker rm ：删除一个或多少容器

docker rm [OPTIONS] CONTAINER [CONTAINER...]
OPTIONS说明：
-f :通过SIGKILL信号强制删除一个运行中的容器
-l :移除容器间的网络连接，而非容器本身
-v :-v 删除与容器关联的卷

强制删除容器db01、db02
docker rm -f db01 db02

移除容器nginx01对容器db01的连接，连接名db
docker rm -l db 

删除容器nginx01,并删除容器挂载的数据卷
docker rm -v nginx01
```
### 1.5 Docker pause/unpause 命令
```
docker pause :暂停容器中所有的进程。
docker unpause :恢复容器中所有的进程。

docker pause [OPTIONS] CONTAINER [CONTAINER...]
docker unpause [OPTIONS] CONTAINER [CONTAINER...]

暂停数据库容器db01提供服务。
docker pause db01

恢复数据库容器db01提供服务。
docker unpause db01
```

### 1.6 Docker create 命令
```
docker create ：创建一个新的容器但不启动它
用法同 docker run

docker create [OPTIONS] IMAGE [COMMAND] [ARG...]

使用docker镜像nginx:latest创建一个容器,并将容器命名为myrunoob
runoob@runoob:~$ docker create  --name myrunoob  nginx:latest      
```


### 1.7 Docker exec 命令
```
docker exec ：在运行的容器中执行命令

docker exec [OPTIONS] CONTAINER COMMAND [ARG...]
OPTIONS说明：
-d :分离模式: 在后台运行
-i :即使没有附加也保持STDIN 打开
-t :分配一个伪终端

在容器mynginx中以交互模式执行容器内/root/runoob.sh脚本
runoob@runoob:~$ docker exec -it mynginx /bin/sh /root/runoob.sh
http://www.runoob.com/

在容器mynginx中开启一个交互模式的终端
runoob@runoob:~$ docker exec -i -t  mynginx /bin/bash
root@b1a0703e41e7:/#
```


## 2.容器操作





## 3.容器rootfs命令

### 3.1 docker commit :从容器创建一个新的镜像。
```
docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]
OPTIONS说明：
-a :提交的镜像作者；
-c :使用Dockerfile指令来创建镜像；
-m :提交时的说明文字；
-p :在commit时，将容器暂停。

将容器a404c6c174a2 保存为新的镜像,并添加提交人信息和说明信息。
runoob@runoob:~$ docker commit -a "runoob.com" -m "my apache" a404c6c174a2  mymysql:v1 
sha256:37af1236adef1544e8886be23010b66577647a40bc02c0885a6600b33ee28057
runoob@runoob:~$ docker images mymysql:v1
```
### 3.2 docker cp :用于容器与主机之间的数据拷贝。
```
docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-
docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH
OPTIONS说明：
-L :保持源目标中的链接

将主机/www/runoob目录拷贝到容器96f7f14e99ab的/www目录下。
docker cp /www/runoob 96f7f14e99ab:/www/

将主机/www/runoob目录拷贝到容器96f7f14e99ab中，目录重命名为www。
docker cp /www/runoob 96f7f14e99ab:/www

将容器96f7f14e99ab的/www目录拷贝到主机的/tmp目录中。
docker cp  96f7f14e99ab:/www /tmp/
```

### 3.3 docker diff : 检查容器里文件结构的更改。
```
docker diff [OPTIONS] CONTAINER

查看容器mymysql的文件结构更改。
runoob@runoob:~$ docker diff mymysql
```


## 4.镜像仓库





## 5.本地镜像管理







## 6.info | version

```
docker info : 显示 Docker 系统信息，包括镜像和容器数。
docker info [OPTIONS]


docker version :显示 Docker 版本信息。
docker version [OPTIONS]

OPTIONS说明：
  -f :指定返回值的模板文件。

```





## 参考
- [docker-run-command.html](http://www.runoob.com/docker/docker-run-command.html)
